<!DOCTYPE html>
<!-- Template by Quackit.com -->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <title>Faraz Bhuiyan PHYS_S-12</title>

    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS: You can use this stylesheet to override any Bootstrap styles and/or apply your own styles -->
    <link href="../css/custom.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Logo and responsive toggle -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">
                    <span class="glyphicon glyphicon-fire"></span> 
                    PHYS_S-12
                </a>
            </div>
            <!-- Navbar links -->
            <div class="collapse navbar-collapse" id="navbar">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="../index.html">Home</a>
                    </li>
                    <li>
                        <a href="../About Me/index.html">About</a>
                    </li>
                    <li>
                        <a href="../Final Project/index.html">Final Project</a>
                    </li>
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Assignments<span class="caret"></span></a>
                        <ul class="dropdown-menu" aria-labelledby="about-us">
                            <li><a href="../01_Intro/index.html">01: Introduction & Documentation </a></li>
                            <li><a href="../02_2D/index.html">02: 2D Design & Cutting</a></li>
                            <li><a href="../03_Electronics/index.html">03: Electronics and Tools</a></li>
                            <li><a href="../04_RapidProto/index.html">04: Rapid Prototyping</a></li>
                            <li><a href="../05_Programable/index.html">05: Programmable Electronics</a></li>
                            <li><a href="../06_3D/index.html">06: 3D Design & Printing</a></li>
                            <li><a href="../07_Electronic Input/index.html">07: Electronic Input Devices</a></li>
                            <li><a href="../08_Electronic Output/index.html">08: Electronic Output Devices</a></li>
                            <li><a href="..09_Network/index.html">09: Networking / IoT</a></li>
                            <li><a href="../10_Machine/index.html">10: Machine building</a></li>
                            <li><a href="../11_Programming/index.html">11: Computer Programming</a></li>
                            <li><a href="../12_Wildcard/index.html">12: Wildcard / Project Prep</a></li>
                            <li><a href="../Final Project/index.html">Final Project</a></li>
                        </ul>
                    </li>

                     <li>
                        <a href="https://nathanmelenbrink.github.io/intro-dig-fab/index.html">Course Page</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <div class="jumbotron feature">
        <div class="container">
            <h1><b>11: Computer Programming</h1></b>
            <h2 class="navy-text"><b>July 27, 2021</h2></b>
        </div>
    </div>

    <!-- Content -->
    <div class="container">

        <!-- Heading -->
        <div class="row">
            <div class="col-sm-12">
                <h1 class="page-header">What To Do </h1>
            </div>
        </div>

         <div class="row">
            <div class="col-sm-12">
                <p class="gray-text">1. Send data to a computer and display results with code you've written.<br>
                                     2. Document progress on your final project. <br>
                                     2. Find a pattern to cast and a ventilated space for class on Tuesday. <br></p>
            </div
>        </div>

        <div class="row">
            <div class="col-sm-12">                                                     
                <h1 class="page-header">What I Did </h1>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">   
                <p style="text-align: justify"> For this assignment, I made lots of progress on my final project, the automatic fish feeder. I created a web interface completely from scratch using <a href="https://firebase.google.com/">Google Firebase</a>, which I've used before for <a href="../09_Network/index.html">assignment 09: Networking / IoT</a>. This time I wanted to take it further, and I definitely did by creating a web interface for controling the fish feeder. I also added in some quality-of-life improvements, like status LEDs and push notifications, both of which I talk about later. </p>

                <p style="text-align: justify"> At first, for my final project, I wanted to control the feeder using Arduino IoT Cloud. But, I realized that it was a bit too limited in functionality for what I wanted. So, I started to make a web interface that's connected to this website, sharing CSS and Bootstrap configurations. I want my final to have it's own website, but for now, I think it turned out pretty well using my website's CSS configs. The final demo that I have completed for this assignment can be seen below.</p>

                <p style="text-align: justify"> To view the fish feeder interface page, <a href="MainInterfaceIndex.html">click here</a>. That specific demo page doesn't actually control anything (I removed the Firebase info for security reasons) but the real interface page does. </p>

                <img class="img-rounded2 center" src="Main Pic.PNG" alt="Main Demo Interface" style="width:70%">
            </div>
        </div>

        <div class="row"><br>
            <div class="col-sm-12">   
                <p style="text-align: justify"> I talk about my whole process of building that web interface and more in the following sections.</p>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12"> 
                <h1 class="page-header">NTP Client Setup </h1>  
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12"> 
                <p style="text-align: justify"> The main reason I switched over to using Firebase from using Arduino IoT is because I wanted to get a working clock using an NTP client. This probably also works using the Arduino IoT Cloud, but I found it to be much easier to do using Firebase and creating my own web interface.</p>

                <p style="text-align: justify">The basis of my interface is built on an interface previous student <a href="https://michelleyl78.github.io/PHYS_S-12/09_class/09_class.html">Michelle </a>made last year. She used an NTP client to recieve a time output, which she then turned into a variable to use as a current time reference. Then, she created a textbox on her interface to input a set time at which her alarm clock would ring. This is exactly what I wanted, so I followed what she did. Of course, I changed many things so it isn't an exact copy.</p>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-7"> 
                <iframe src=https://create.arduino.cc/editor/farazb/779a73ce-af7a-4f85-8a36-dd6e355398aa/preview?embed style="height:977px;width:100%;margin:10px 0" frameborder=0></iframe>
            </div>

            <div class="col-sm-5"> 
                <p style="text-align: justify">The first change I made was actually to use a completely different NTP server. I found that Michelle's method was too confusing for me, so I followed <a href="https://randomnerdtutorials.com/esp32-date-time-ntp-client-server-arduino/">this guide</a> by Random Nerd Tutorials. It was super easy to set up and integrate with my previous skethces. The guide itself is very comprehensive and explains every line of code, which is great. The best part is that I didn't even have to include any other libraries other than the WiFi.h library, which we already have been using, and Arduino's time.h library.</p>

                <p style="text-align: justify">The way that the time data is recieved from the NTP server itself is by calling the <code>strftime</code> function.  This function is used to format time recieved from the NTP server as strings that we can actually use. So, at the bottom of the code on the first tab, the <code>Serial.print</code> lines are printing various <code>strftime</code> specifiers, each outputting a different time format. The <code>strftime</code> specifiers used in the first tab and their meanins are in the chart below. A list of all the strftime specifiers can be found <a href="http://www.cplusplus.com/reference/ctime/strftime/">here</a>.</p>

                <img class="img-rounded center" src="strft functions.PNG" alt="strft functions" style="width:80%">
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <p style="text-align: justify">The only difference between the first and seconds tabs is that in the second tab, I got rid of the extra  <code>strftime</code> specifiers that I wasn't using and replaced them with the one function I need: <code>%R</code> for formatting time in HR:MIN format. I then created a variabled called currentTime, which I use for all of the codes from here on out. This way, I can compare the time set in the text box to the actual time recieved from the NTP server and execute a function. </p>

                <p style="text-align: justify">The first serial monitor image below shows the serial monitor output from the code in the first tab. The second image shows the output from the code in the second tab. </p>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <img src="Time NTP Serial Monitor.PNG" alt="Time NTP Serial Monitor" style="width:100%">
            </div>

            <div class="col-sm-6">
                <img src="Time NTP HR_MIN Serial Monitor.PNG" alt="Time NTP HR_MIN Serial Monitor" style="width:100%">
            </div>
        </div>

        <div class="row"><br>
            <div class="col-sm-12">
                <p style="text-align: justify"> This is really all I needed from the NTP server, as I wanted to have some way for the feeder to activate at a set time daily. The next steps were creating the interface with multiple functions, hooking up to firebase, and setting up push notifications. I talk about each of them below.</p>
            </div>
        </div>


        <div class="row">
            <div class="col-sm-12"> 
                <h1 class="page-header">Web Interface and Firebase </h1>  
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <p style="text-align: justify"> My basic interface is shown in the image below. It's almost exactly the same as Michelle's alarm web interface, but that's only because I used the same textbox and "set time" function as she did. I linked the basic interface demo and HTML files below. I hid my Firebase info in the HTML file for security reaons, but if you want to copy my example, all you need to do is use your Firebase info.</p><br>

                <p style="text-align: justify">To view a demo of the basic interface page, <a href="FeederNoCSSindex.html">click here</a>. </p>

                <p style="text-align: justify">To view the HTML, including JavaScript button and text box functions, of the basic interface page, <a href="FeederBasicNoCSSInterfaceHTML.txt">click here</a>. </p>

                <img class="center" src="Fish Feeder Website No CSS.PNG" alt="Fish Feeder Website No CSS" style="width:70%">

                <p style="text-align: justify"> Now that I had a basic interface, I wanted to expand the functions of the interface and incorporate my website's CSS and Bootstrap theming to make it look good. Firstly, I added my web interface HTML page to this website's folder and referenced the Bootstrap, CSS, and JS files on the web interface. This significantly made it look better (obviously).</p>

                <p style="text-align: justify"> Below is an image of what the basic interface looks like with CSS. I changed up the wording a bit, but the biggest change is the font. It looks way better with the font I'm using on this website (I honestly don't know what it's called). I don't link the HTML or the page itself because it's bascially the same as the first one with the CSS files included.</p> <br>

                <img class="center" src="Fish Feeder Website.PNG" alt="Fish Feeder Website" style="width:70%"><br>       

                <p style="text-align: justify"> In the Arduino code embded below, I deleted my actual Firebase info and WiFi info for security reasons. For the code to actually run, you need to put your Firebase info and WiFi info when I left mine blank. I also split up my coding addition into three tabs, just so it's easier to follow what I'm doing.</p>

                <p style="text-align: justify">The first tab in the embed is for the interface example shown above, just a text box with time setting. </p>

                <p style="text-align: justify">The second tab adds in another Firebase string, which is for writing and detecting the feeder status. This allowed me to add in a manual "ON" and "OFF" button.</p>

                <p style="text-align: justify">The third tab adds three cycles that I can manually activate to feed once, twice, or three times in one feeding. These cycles use the Firebase string that I added in the second tab.</p>

            </div>
        </div>

        <div class="row">
            <div class="col-sm-7">
                <iframe src=https://create.arduino.cc/editor/farazb/770013de-1cb3-424f-aca6-e62452579798/preview?embed style="height:2132px;width:100%;margin:10px 0" frameborder=0></iframe>
            </div>

            <div class="col-sm-5">
                <p style="text-align: justify">One thing to note is that I connected this portfolio website to the interface website in this example, so the navbar is shown, otherwise that wouldn't actually be on the real interface. I also added a picture of two red shrimp from my tank: Shrimp and Shrimpette.</p>    

                <p style="text-align: justify">So the way that the timer actually works is that you set a time in the web interface using military time because I am using a military time output <code>strftime</code> specifiers so I recieve the time in military time from the NTP server. Then, I set that military time I recieved as the <code>currentTime</code>. So, when you type a number into the interface, the variable for which is <code>feedingTimeString</code>, it is compared to the <code>currentTime</code> and executes if the two equal eachother. This is seen in the first <code>if()</code> statement on all tabs.</p>

                <p style="text-align: justify">The video embeded below shows how to set the time and the real-time database updating on Firebase. The code for the interface in the video is on the first tab in the Arduino embed. </p>

                <iframe width="460" height="258" src="https://www.youtube.com/embed/51xkq3yoYtw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br><br>

                <p style="text-align: justify">In the second tab, I added in a new string so I can manually turn on and off the feeder. The new string is called <code>feederStatusString</code>, and the reason I need it is because the first one is being used for a time value (whatever time I have set for daily feeding). The image below shows what the two values in my Firebase databse look like. </p>    

                <img class="img-rounded center" src="Firebase.PNG" alt="Firebase Database" style="width:50%"><br>

                <p style="text-align: justify"> These values in Firebase change depending on the input from the web interface. For the buttons, I created two more <code>if()</code> statements, one for "ON" and one for "OFF", and have <code>feederStatusString</code> being compared to them. So, if I press "On" on the web interface, it updates on Firebase first, and then that data is recieved by the Huzzah (my ESP32 board) either as "ON" or "OFF." Since the <code>feederStatusString</code> is constantly being compared in the two manual mode <code>if()</code> statements, when the <code>feederStatusString</code> is set to either "ON" or "OFF," the code within whichever <code>if()</code> statement was set to "ON" or "OFF" activates. </p> 

                <p style="text-align: justify"> The third tab additions was basically a duplication of the second tabs additions three times. I added in a one cycle, two cycles, and three cycles manual buttons on the interface, just to give myself more control over how much I want to feed the fish. It works the same way as the On and Off buttons work, as I described above. </p>

                <p style="text-align: justify"> With the addition of the manual status control and cycles, this now meant that my website had 3 total functions: setting daily feed times, manual feeder status control, and manual feeding cycle control.</p> <br>

                <p style="text-align: justify">To view a demo of the triple-function interface page, <a href="MainInterfaceIndex.html">click here</a>. </p>

                <p style="text-align: justify">To view the HTML, including JavaScript button and text box functions, of the triple-function interface page, <a href="FeederInterfaceHTML.txt">click here</a>. </p>

                <p style="text-align: justify"> To make the buttons look nice in the interface, I followed <a href="https://codepen.io/davidcochran/pen/WbWXoa/">this guide</a> by David Cochran.</p> 
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <p style="text-align: justify"> And that was basically it for adding key functions to the interface. I added everything I wanted during this assignment, like the type setting function and manual control functions. In the future, I want to add a bit more like a box for "previous time set" or "current time set," just so I know what time I had set last time because as of right now, after you leave the interface page, your set time erases.</p>

                <p style="text-align: justify"> One quality-of-life improvement I made was configuring my Huzzah board to send push notifications using IFTTT. I talk about this in the next section.</p>
            </div>
        </div>


        <div class="row">
            <div class="col-sm-12"> 
                <h1 class="page-header">Sending Push Notification</h1>  
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <p style="text-align: justify"> Because my final is an automatic feeder, I wanted to find a way for the feeder to notify me that it has run. I was tossing a few ideas around, like sending data to a Google Sheet or turning on an LED when the feeding was done for the day. But, I figured that the best idea was having push notifcations for every time the feeder ran.</p>

                <p style="text-align: justify"> I searched for different ways of sending push notifications from an ESP32 (my Huzzah) to my phone. I landed on <a href="https://ifttt.com/">IFTTT</a>, which stands for If This Then That. IFTTT is a very popular IoT app that allows you to connect all types of internet-based devices to eachother, so it was perfect for sending notfications from my Huzzah to my phone. On IFTTT you make these things called "Applets," which are like "mini, active apps you can create — things your apps can't do on their own," as stated on the IFTTT website. Essentially, in this Applet, you set an "if" and a "then" event. So, if this event occurs, then that event triggers. And, the best thing is that I can make three of these Applets completely free. </p>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <p style="text-align: justify"> For setting up an IFTTT Applet, I used the Arduino guide embeded on the right. It was very useful for setting up the whole thing, so I won't talk much about the process.</p>

                <p style="text-align: justify"> The guide itself shows you how to set up the Applet and hook it up to Google Drive. Instead of hooking it up to my Google Drive, I just have it set to send a notification to the IFTTT app on my phone when the event triggers. To connect IFTTT to the Huzzah, I found <a href="https://siytek.com/arduino-to-ifttt-using-webhooks/">this tutorial</a> made by Siytek. It was incredibly helpful, and very thorough as well. For connecting IFTT to the Huzzah using the method above, I neede to download the "AnotherIFTTTWebhook" library made by Siytek, the GitHub link for which is  <a href="https://github.com/Siytek/AnotherIFTTTWebhook">linked here</a>. Siytek's guide not only shows how to integrate IFTTT with the Arduino code editor but also shows how to call the function to trigger the "if" event.</p>

                <p style="text-align: justify"> Both these guides were super helpful, and I definitely recommend using them if you plan on using IFTTT with Arduino.</p>
            </div>

            <div class="col-sm-6">
                <iframe frameborder='0' height='500' scrolling='no' src='https://create.arduino.cc/projecthub/uladzislau-bayouski/ifttt-the-phone-connected-3a009b/embed' width='560' style='margin-top:10px'></iframe>
            </div>
        </div>

        <div class="row"><br>
            <div class="col-sm-12">
                <p style="text-align: justify"> I'll now talk about how I set up my Applet for the automatic fish feeder push notifications. Like I said, it's a very simple and intuitive process, so there aren't really many steps.</p>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-4">
                <p style="text-align: justify"> To the right are images of my "if" and "then" events.</p>

                <p style="text-align: justify"> The "if" event basically says, "if IFTTT recieves a web request to trigger an event," which, in terms of my situation, means "if Arduino calls IFTTT to trigger the Feeder_Activated event." The name I gave my event is "Feeder_Activated."</p>

                <p style="text-align: justify"> The "then" event basically says, "push a notification from the IFTTT app saying Feeder_Activated and exactly when it occured." Below is what the notification on my phone looks like.</p>
            </div>

            <div class="col-sm-4">
                <img class="img-rounded2 center" src="IFTTT TriggerSq.png" alt="IFTTT TriggerSq" style="width:100%">
            </div>

            <div class="col-sm-4">
                <img class="img-rounded2 center" src="IFTTT ActionsSq.png" alt="IFTTT ActionsSq" style="width:100%">
            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <img class="img-rounded2 center" src="IFTTT Notification.jpg" alt="IFTTT Notification" style="width:70%">
            </div>
        </div>





        


     <div class="row">
            <div class="col-sm-12"> 
                <h1 class="page-header">What I Learned </h1>
                    <p>» <br>
                       » 
                    </p>
            </div>
        </div>





    </div>
     
        <div class="small-print">
            <div class="container">
                <p style="text-align: center">Copyright &copy; Faraz Bhuiyan 2021 </p>
            </div>
        </div>
    </div>
    
    <!-- jQuery -->
    <script src="../js/jquery-1.11.3.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>
    
    <!-- IE10 viewport bug workaround -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>
    
    <!-- Placeholder Images -->
    <script src="../js/holder.min.js"></script>
    
</body>

</html>
